<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_validation"></a> [validation](#requirement\_validation) | ~> 1.1.1 |

## Providers

No providers.

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_loadbalancer"></a> [loadbalancer](#module\_loadbalancer) | Azure/avm-res-network-loadbalancer/azurerm | 0.2.2 |

## Resources

No resources.

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_backend_address_pool_addresses"></a> [backend\_address\_pool\_addresses](#input\_backend\_address\_pool\_addresses) | A map of backend address pool addresses to associate with the backend address pool<br><br>  - `name`: (Optional) The name of the backend address pool address, if adding an address. Changing this forces a new backend address pool address to be created.<br>  - `backend_address_pool_object_name`: (Optional) The name of the backend address pool object within the virtual network. Changing this forces a new backend address pool address to be created.<br>  - `ip_address`: (Optional) The static IP address which should be allocated to the backend address pool.<br>  - `virtual_network_resource_id`: (Optional) The ID of the virtual network that the backend address pool address should be associated with. Helps with mapping to correct backend pool.<pre>terraform<br>  backend_address_pool_addresses = {<br>    address1 = {<br>      name                      = "backend_vm_address"<br>      backend_address_pool_object_name = "bepool_1"<br>      ip_address                = "10.10.1.5"<br>    }<br>  }</pre> | <pre>map(object({<br>    name                             = optional(string)<br>    backend_address_pool_object_name = optional(string)<br>    ip_address                       = optional(string)<br>    virtual_network_resource_id      = optional(string)<br>  }))</pre> | `{}` | no |
| <a name="input_backend_address_pool_configuration"></a> [backend\_address\_pool\_configuration](#input\_backend\_address\_pool\_configuration) | String variable that determines the target virtual network for potential backend pools, at the load balancer level.<br>  You can specify the `virutal_network_resource_id` at the pool level or backend address level.<br>  If using network interfaces, leave this variable empty. | `string` | `null` | no |
| <a name="input_backend_address_pool_network_interfaces"></a> [backend\_address\_pool\_network\_interfaces](#input\_backend\_address\_pool\_network\_interfaces) | A map of objects that associates one or more backend address pool network interfaces<br><br>  - `backend_address_pool_object_name`: (Optional) The name of the backend address pool object that this network interface should be associated with<br>  - `ip_configuration_name`: (Optional) The name of the IP configuration that this network interface should be associated with<br>  - `network_interface_resource_id`: (Optional) The ID of the network interface that should be associated with the backend address pool<pre>terraform<br>  backend_address_pool_network_interfaces = {<br>    node1 = {<br>      backend_address_pool_object_name = "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/loadBalancers/{loadBalancerName}/backendAddressPools/{backendAddressPoolName}"<br>      ip_configuration_name = "ipconfig1"<br>      network_interface_resource_id = "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/networkInterfaces/{networkInterfaceName}"<br>    }<br>  }</pre> | <pre>map(object({<br>    backend_address_pool_object_name = optional(string)<br>    ip_configuration_name            = optional(string)<br>    network_interface_resource_id    = optional(string)<br>  }))</pre> | `{}` | no |
| <a name="input_backend_address_pools"></a> [backend\_address\_pools](#input\_backend\_address\_pools) | A map of objects that creates one or more backend pools<br><br>  - `name`: (Optional) The name of the backend address pool to create<br>  - `virtual_network_resource_id`: (Optional) The ID of the virtual network that the backend pool should be associated with. Sets pool to use only backend addresses via private IP. Leave empty if using network interfaces or mix of network interfaces and backend addresses.<br>  - `tunnel_interfaces`: (Optional) A map of objects that creates one or more tunnel interfaces for the backend pool<br>    - `identifier`: (Optional) The identifier of the tunnel interface<br>    - `type`: (Optional) The type of the tunnel interface<br>    - `protocol`: (Optional) The protocol of the tunnel interface<br>    - `port`: (Optional) The port of the tunnel interface<pre>terraform<br>  backend_address_pools = {<br>    pool1 = {<br>      name = "bepool1"<br>      tunnel_interfaces = {<br>        internal_tunnel = {<br>          identifier = 800<br>          type       = "Internal"<br>          protocol   = "VXLAN"<br>          port       = 10800<br>        }<br>        external_tunnel = {<br>          identifier = 801<br>          type       = "External"<br>          protocol   = "VXLAN"<br>          port       = 10801<br>        }<br>      }<br>    }<br>  }</pre> | <pre>map(object({<br>    name                        = optional(string, "bepool-1")<br>    virtual_network_resource_id = optional(string)<br>    tunnel_interfaces = optional(map(object({<br>      identifier = optional(number)<br>      type       = optional(string)<br>      protocol   = optional(string)<br>      port       = optional(number)<br>    })), {})<br>  }))</pre> | `{}` | no |
| <a name="input_diagnostic_settings"></a> [diagnostic\_settings](#input\_diagnostic\_settings) | A map of objects that manage a Diagnostic Setting.<br><br>  - `name`: (Optional) The name of the diagnostic setting.<br>  - `log_groups`: (Optional) A set of log groups. Defaults to a set containing "allLogs".<br>  - `metric_categories`: (Optional) A set of metric categories. Defaults to a set containing "AllMetrics".<br>  - `log_analytics_destination_type`: (Optional) The destination type for log analytics. Defaults to "Dedicated".<br>  - `workspace_resource_id`: (Optional) The resource ID of the workspace. Defaults to null. This is a required field if `storage_account_resource_id`, `event_hub_authorization_rule_resource_id`, and `marketplace_partner_resource_id` are not set.<br>  - `storage_account_resource_id`: (Optional) The resource ID of the storage account. Defaults to null. This is a required field if `workspace_resource_id`, `event_hub_authorization_rule_resource_id`, and `marketplace_partner_resource_id` are not set.<br>  - `event_hub_authorization_rule_resource_id`: (Optional) The resource ID of the event hub authorization rule. Defaults to null. This is a required field if `workspace_resource_id`, `storage_account_resource_id`, and `marketplace_partner_resource_id` are not set.<br>  - `event_hub_name`: (Optional) The name of the event hub. Defaults to null.<br>  - `marketplace_partner_resource_id`: (Optional) The resource ID of the marketplace partner. Defaults to null. This is a required field if `workspace_resource_id`, `storage_account_resource_id`, and `event_hub_authorization_rule_resource_id` are not set.<br>  Please note that at least one of `workspace_resource_id`, `storage_account_resource_id`, `marketplace_partner_resource_id`, or `event_hub_authorization_rule_resource_id` must be set.<pre>terraform<br>  diagnostic_settings = {<br>    diag_setting_1 = {<br>      name                                     = "diagSetting1"<br>      log_groups                               = ["allLogs"]<br>      metric_categories                        = ["AllMetrics"]<br>      log_analytics_destination_type           = "Dedicated"<br>      workspace_resource_id                    = "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.OperationalInsights/workspaces/{workspaceName}"<br>      storage_account_resource_id              = "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Storage/storageAccounts/{storageAccountName}"<br>      event_hub_authorization_rule_resource_id = "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/authorizationrules/{authorizationRuleName}"<br>      event_hub_name                           = "{eventHubName}"<br>      marketplace_partner_resource_id          = "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{partnerResourceProvider}/{partnerResourceType}/{partnerResourceName}"<br>    }<br>  }</pre> | <pre>map(object({<br>    name                                     = optional(string, null)<br>    log_categories                           = optional(set(string), [])<br>    log_groups                               = optional(set(string), ["allLogs"])<br>    metric_categories                        = optional(set(string), ["AllMetrics"])<br>    log_analytics_destination_type           = optional(string, "Dedicated")<br>    workspace_resource_id                    = optional(string, null)<br>    storage_account_resource_id              = optional(string, null)<br>    event_hub_authorization_rule_resource_id = optional(string, null)<br>    event_hub_name                           = optional(string, null)<br>    marketplace_partner_resource_id          = optional(string, null)<br>  }))</pre> | `{}` | no |
| <a name="input_edge_zone"></a> [edge\_zone](#input\_edge\_zone) | Specifies the Edge Zone within the Azure Region where this Public IP and Load Balancer should exist.<br>  Changing this forces new resources to be created. | `string` | `null` | no |
| <a name="input_enable_telemetry"></a> [enable\_telemetry](#input\_enable\_telemetry) | This variable controls whether or not telemetry is enabled for the module.<br>  For more information see https://aka.ms/avm/telemetry.<br>  If it is set to false, then no telemetry will be collected. | `bool` | `true` | no |
| <a name="input_frontend_ip_configurations"></a> [frontend\_ip\_configurations](#input\_frontend\_ip\_configurations) | A map of objects that builds frontend ip configurations for the load balancer. <br>  You need at least one frontend ip configuration to deploy a load balancer.<br><br>  - `name`: (Optional) The name of the frontend IP configuration. Changing this forces a new resource to be created<br>  - `frontend_private_ip_address`: (Optional) A string parameter that is the private IP address to assign to the Load Balancer. The last one and first four IPs in any range are reserved and cannot be manually assigned.<br>  - `frontend_private_ip_address_version`: (Optional) A string parameter that is the version of IP that the private IP address is. Possible values are IPv4 or IPv6<br>  - `frontend_private_ip_address_allocation`: (Optional) A string parameter that is the allocation method for the private IP address used by this Load Balancer. Possible values as Dynamic or Static<br>  - `frontend_private_ip_subnet_resource_id`: (Optional) A string parameter that is the ID of the subnet which should be associated with the IP configuration. If desired to use the same subnet for each frontend ip configuration, use frontend\_subnet\_resource\_id, or use frontend\_vnet\_name and frontend\_subnet\_name. If for public ip configuration, leave parameter empty/null.<br>  - `public_ip_address_resource_name`: (Optional) A string parameter that is the name of the public ip address to be created AND associated with the Load Balancer. Changing this forces a new Public IP to be created.<br>  - `public_ip_address_resource_id`: (Optional) A string parameter that is the ID of a public ip address which should associated with the Load Balancer.<br>  - `public_ip_prefix_resource_id`: (Optional) A string parameter that is the ID of a public IP prefixes which should be associated with the Load Balancer. Public IP prefix can only be used with outbound rules<br>  - `frontend_private_ip_zones`: (Optional) A  set of strings that specifies a list of availability zones in which the private IP address for this Load Balancer should be located.<br>  - `tags`: (Optional) = A mapping of tags to assign to the individual public IP resource.<br>  - `create_public_ip_address`: (Optional) A boolean parameter to create a new public IP address resource for the Load Balancer<br>  - `new_public_ip_resource_group_name`: (Optional) A string for the name of the resource group to place the newly created public IP into. If null, will choose `location` from `public_ip_address_configuration` or `location` for the Load Balancer.<br>  - `new_public_ip_location`: (Optional) A string parameter for the location to deploy the public IP address resource.<br>  - `inherit_lock`: (Optional)  A boolean to determine if the lock from the Load Balancer will be inherited by the public IP.<br>  - `lock_type_if_not_inherited`: (Optional) An optional string to determine what kind of lock will be placed on the public IP is not inherited from the Load Balancer<br>  - `inherit_tags`: (Optional) A boolean to determine if the public IP will inherit tags from the Load Balancer.<br>  - `edge_zone`: (Optional) A string that specifies the Edge Zone within the Azure Region where this public IP should exist. Changing this forces a new Public IP to be created.<br>  - `zones`: (Optional) A list of strings that contains the availability zone to allocate the public IP in. Changing this forces a new resource to be created.<br>  - `role_assignments`: A map of objects that assigns a given principal (user or group) to a given role.<br>    - `role_definition_id_or_name`: The ID or name of the role definition to assign to the principal.<br>    - `principal_id`: The ID of the principal to assign the role to.<br>    - `description`: (Optional) A description of the role assignment.<br>    - `skip_service_principal_aad_check`: (Optional) If set to true, skips the Azure Active Directory check for the service principal in the tenant. This should only be set to true if using a service principal. Defaults to false.<br>    - `condition`: (Optional) A condition that will be used to scope the role assignment.<br>    - `condition_version`: (Optional) The version of the condition syntax. Valid values are '2.0'. Defaults to null.<br>    - `delegated_managed_identity_resource_id`: (Optional) The resource ID of the delegated managed identity.<br>  - `diagnostic_settings`: A map of objects that manage a Diagnostic Setting.<br>    - `name`: (Optional) The name of the diagnostic setting.<br>    - `log_groups`: (Optional) A set of log groups. Defaults to a set containing "allLogs".<br>    - `metric_categories`: (Optional) A set of metric categories. Defaults to a set containing "AllMetrics".<br>    - `log_analytics_destination_type`: (Optional) The destination type for log analytics. Defaults to "Dedicated".<br>    - `workspace_resource_id`: (Optional) The resource ID of the workspace. Defaults to null. This is a required field if `storage_account_resource_id`, `event_hub_authorization_rule_resource_id`, and `marketplace_partner_resource_id` are not set.<br>    - `storage_account_resource_id`: (Optional) The resource ID of the storage account. Defaults to null. This is a required field if `workspace_resource_id`, `event_hub_authorization_rule_resource_id`, and `marketplace_partner_resource_id` are not set.<br>    - `event_hub_authorization_rule_resource_id`: (Optional) The resource ID of the event hub authorization rule. Defaults to null. This is a required field if `workspace_resource_id`, `storage_account_resource_id`, and `marketplace_partner_resource_id` are not set.<br>    - `event_hub_name`: (Optional) The name of the event hub. Defaults to null.<br>    - `marketplace_partner_resource_id`: (Optional) The resource ID of the marketplace partner. Defaults to null. This is a required field if `workspace_resource_id`, `storage_account_resource_id`, and `event_hub_authorization_rule_resource_id` are not set.<br><br>  Example Input:<pre>terraform<br>  # Standard Regional IPv4 Private Ip Configuration<br>  frontend_ip_configurations = {<br>    frontend_configuration_1 = {<br>      name = "internal_lb_private_ip_1_config"<br>      frontend_private_ip_address_version    = "IPv4"<br>      frontend_private_ip_address_allocation = "Dynamic"<br>    }<br><br>  # Standard Regional IPv4 Public IP Frontend IP Configuration<br>  frontend_ip_configurations = {<br>    frontend_configuration_1 = {<br>      name                     = "public_lb_public_ip_1_config"<br>      public_ip_address_name = "public_lb_public_ip_1"<br>      create_public_ip_address = true<br>    }<br>  }</pre> | <pre>map(object({<br>    name                                               = optional(string)<br>    frontend_private_ip_address                        = optional(string)<br>    frontend_private_ip_address_version                = optional(string)<br>    frontend_private_ip_address_allocation             = optional(string, "Dynamic")<br>    frontend_private_ip_subnet_resource_id             = optional(string)<br>    gateway_load_balancer_frontend_ip_configuration_id = optional(string)<br>    public_ip_address_resource_name                    = optional(string)<br>    public_ip_address_resource_id                      = optional(string)<br>    public_ip_prefix_resource_id                       = optional(string)<br>    # frontend_private_ip_zones                                  = optional(set(string), [1, 2, 3])<br>    tags                              = optional(map(any), {})<br>    create_public_ip_address          = optional(bool, false)<br>    new_public_ip_resource_group_name = optional(string)<br>    new_public_ip_location            = optional(string)<br>    inherit_lock                      = optional(bool, true)<br>    lock_type_if_not_inherited        = optional(string, null)<br>    inherit_tags                      = optional(bool, true)<br>    edge_zone                         = optional(string)<br>    zones                             = optional(list(string), ["1", "2", "3"])<br><br>    role_assignments = optional(map(object({<br>      role_definition_id_or_name             = string<br>      principal_id                           = string<br>      description                            = optional(string, null)<br>      skip_service_principal_aad_check       = optional(bool, false) # only set to true IF using service principal<br>      condition                              = optional(string, null)<br>      condition_version                      = optional(string, null) # Valid values are 2.0<br>      delegated_managed_identity_resource_id = optional(string, null)<br>    })), {})<br><br>    diagnostic_settings = optional(map(object({<br>      name                                     = optional(string, null)<br>      log_categories                           = optional(set(string), [])<br>      log_groups                               = optional(set(string), ["allLogs"])<br>      metric_categories                        = optional(set(string), ["AllMetrics"])<br>      log_analytics_destination_type           = optional(string, "Dedicated")<br>      workspace_resource_id                    = optional(string, null)<br>      storage_account_resource_id              = optional(string, null)<br>      event_hub_authorization_rule_resource_id = optional(string, null)<br>      event_hub_name                           = optional(string, null)<br>      marketplace_partner_resource_id          = optional(string, null)<br>    })), {})<br>  }))</pre> | n/a | yes |
| <a name="input_frontend_subnet_resource_id"></a> [frontend\_subnet\_resource\_id](#input\_frontend\_subnet\_resource\_id) | (Optional) The frontend subnet id to use when in private mode. Can be used for all ip configurations that will use the same subnet. `frontend_private_ip_subnet_resource_id` can be set per frontend configuration for private ip. | `string` | `null` | no |
| <a name="input_lb_nat_pools"></a> [lb\_nat\_pools](#input\_lb\_nat\_pools) | A map of objects that define the inbound NAT rules for a Load Balancer. Each object has the following<br><br>  - `name`: (Optional) The name of the Load Balancer rule. Changing this forces a new resource to be created.<br>  - `frontend_ip_configuration_name`: (Optional) The name of the frontend IP configuration to which the rule is associated with<br>  - `protocol`: (Optional) The transport protocol for the external endpoint. Possible values are All, Tcp, or Udp.<br>  - `frontend_port_start`: (Optional) The first port number in the range of external ports that will be used to provide Inbound NAT to NICs associated with this Load Balancer. Possible values range between 1 and 65534, inclusive.<br>  - `frontend_port_end`: (Optional) The last port number in the range of external ports that will be used to provide Inbound NAT to NICs associated with this Load Balancer. Possible values range between 1 and 65534, inclusive.<br>  - `backend_port`: (Optional) The port used for the internal endpoint. Possible values range between 1 and 65535, inclusive.<br>  - `idle_timeout_in_minutes`: (Optional) Specifies the idle timeout in minutes for TCP connections. Valid values are between 4 and 30 minutes. Defaults to 4 minutes.<br>  - `enable_floating_ip`: (Optional) A boolean parameter to determine if there are floating IPs enabled for this Load Balancer NAT rule. A "floating” IP is reassigned to a secondary server in case the primary server fails. Required to configure a SQL AlwaysOn Availability Group. Defaults to false.<br>  - `enable_tcp_reset`: (Optional) A boolean to determine if TCP Reset is enabled for this Load Balancer rule. Defaults to false.<pre>terraform<br>  lb_nat_pools = {<br>    lb_nat_pool_1 = {<br>      resource_group_name            = azurerm_resource_group.example.name<br>      loadbalancer_id                = azurerm_lb.example.id<br>      name                           = "SampleApplicationPool"<br>      protocol                       = "Tcp"<br>      frontend_port_start            = 80<br>      frontend_port_end              = 81<br>      backend_port                   = 8080<br>      frontend_ip_configuration_name = "PublicIPAddress"<br>    }<br>  }</pre> | <pre>map(object({<br>    name                           = optional(string)<br>    frontend_ip_configuration_name = optional(string)<br>    protocol                       = optional(string, "Tcp")<br>    frontend_port_start            = optional(number, 3000)<br>    frontend_port_end              = optional(number, 3389)<br>    backend_port                   = optional(number, 3389)<br>    idle_timeout_in_minutes        = optional(number, 4)<br>    enable_floating_ip             = optional(bool, false)<br>    enable_tcp_reset               = optional(bool, false)<br>  }))</pre> | `{}` | no |
| <a name="input_lb_nat_rules"></a> [lb\_nat\_rules](#input\_lb\_nat\_rules) | A map of objects that specifies the creation of NAT rules.<br><br>  - `name`: (Optional) The name of the NAT rule. Changing this forces a new resource to be created<br>  - `frontend_ip_configuration_name`: (Optional) The name of the frontend IP configuration exposing this rule<br>  - `protocol`: (Optional) The transport protocol front the external endpoint. Possible values are All, Tcp, or Udp<br>  - `frontend_port`: (Optional) The port for the external endpoint. Port numbers for each Rule must be unique within the Load Balancer. Possible values range between 1 and 65534, inclusive. Leave null or 0 if protocol is set to All<br>  - `backend_port`: (Optional) The port used for internal connections on the endpoint. Possible values range between 1 and 65535, inclusive. Leave null or 0 if protocol is set to All<br>  - `frontend_port_start`: (Optional) The port range start for the external endpoint. This property is used together with BackendAddressPool and FrontendPortRangeEnd. Individual inbound NAT rule port mappings will be created for each backend address from BackendAddressPool. Acceptable values range from 1 to 65534, inclusive.<br>  - `frontend_port_end`: (Optional) The port range end for the external endpoint. This property is used together with BackendAddressPool and FrontendPortRangeStart. Individual inbound NAT rule port mappings will be created for each backend address from BackendAddressPool. Acceptable values range from 1 to 65534, inclusive.<br>  - `backend_address_pool_resource_id`: (Optional) The ID of the backend address pool that this NAT rule references<br>  - `backend_address_pool_object_name`: (Optional) The name of the backend address pool that this NAT rule references<br>  - `idle_timeout_in_minutes`: (Optional) Specifies the idle timeout in minutes for TCP connections. Valid values are between 4 and 30 minutes. Defaults to 4 minutes.<br>  - `enable_floating_ip`: (Optional) A boolean parameter to determine if there are floating IPs enabled for this Load Balancer NAT rule. A "floating” IP is reassigned to a secondary server in case the primary server fails. Required to configure a SQL AlwaysOn Availability Group. Defaults to false.<br>  - `enable_tcp_reset`: (Optional) A boolean parameter to determine if TCP Reset is enabled for this Load Balancer NAT rule. Defaults to false<pre>terraform<br>  lb_nat_rules = {<br>    lb_nat_rule_1 = {<br>      name                           = "tcp_nat_rule_1"<br>      frontend_ip_configuration_name = "internal_lb_private_ip_1_config"<br>      protocol = "Tcp"<br>      frontend_port = 3389<br>      backend_port = 3389<br>    }<br>  }</pre> | <pre>map(object({<br>    name                             = optional(string)<br>    frontend_ip_configuration_name   = optional(string)<br>    protocol                         = optional(string)<br>    frontend_port                    = optional(number)<br>    backend_port                     = optional(number)<br>    frontend_port_start              = optional(number)<br>    frontend_port_end                = optional(number)<br>    backend_address_pool_resource_id = optional(string)<br>    backend_address_pool_object_name = optional(string)<br>    idle_timeout_in_minutes          = optional(number, 4)<br>    enable_floating_ip               = optional(bool, false)<br>    enable_tcp_reset                 = optional(bool, false)<br>  }))</pre> | `{}` | no |
| <a name="input_lb_outbound_rules"></a> [lb\_outbound\_rules](#input\_lb\_outbound\_rules) | A map of objects that define the outbound rules for a Load Balancer. Each object is identified by a unique key in the map and has the following properties:<br><br>  - `name`: (Optional) The name of the Load Balancer rule. Changing this forces a new resource to be created.<br>  - `frontend_ip_configuration_name`: (Optional) The list of names of the frontend IP configuration to which the rule is associated with<br>  - `backend_address_pool_resource_id`: (Optional) An ID that references a Backend Address Pool over which this Load Balancing Rule operates. Multiple backend pools only valid if Gateway SKU<br>  - `backend_address_pool_object_name`: (Optional) A name that references a Backend Address Pool over which this Load Balancing Rule operates. Multiple backend pools only valid if Gateway SKU<br>  - `protocol`: (Optional) The transport protocol for the external endpoint. Possible values are All, Tcp, or Udp.<br>  - `enable_tcp_reset`: A boolean to determine if TCP Reset is enabled for this Load Balancer rule. Defaults to false.<br>  - `number_of_allocated_outbound_ports`: (Optional) <br>  - `idle_timeout_in_minutes`: Specifies the idle timeout in minutes for TCP connections. Valid values are between 4 and 30 minutes. Defaults to 4 minutes.<pre>terraform<br>  lb_outbound_rules = {<br>    lb_outbound_rule_1 = {<br>      name = "outbound_rule_1"<br>      frontend_ip_configurations = [<br>        {<br>          name = "frontend_1"<br>        }<br>      ]<br>    }<br>  }</pre> | <pre>map(object({<br>    name                               = optional(string)<br>    frontend_ip_configurations         = optional(list(object({ name = optional(string) })))<br>    backend_address_pool_resource_id   = optional(string)<br>    backend_address_pool_object_name   = optional(string)<br>    protocol                           = optional(string, "Tcp")<br>    enable_tcp_reset                   = optional(bool, false)<br>    number_of_allocated_outbound_ports = optional(number, 1024)<br>    idle_timeout_in_minutes            = optional(number, 4)<br>  }))</pre> | `{}` | no |
| <a name="input_lb_probes"></a> [lb\_probes](#input\_lb\_probes) | A list of objects that specify the Load Balancer probes to be created.<br>  Each object has 7 parameters:<br><br>  - `name`: (Optional) The name of the probe. Changing this forces a new probe resource to be created.<br>  - `protocol`: (Optional) Specifies the protocol of the end point. Possible values are Http, Https or Tcp. If TCP is specified, a received ACK is required for the probe to be successful. If HTTP is specified, a 200 OK response from the specified URI is required for the probe to be successful.<br>  - `port`: (Optional) The port on which the probe queries the backend endpoint. Possible values range from 1 to 65535, inclusive.<br>  - `probe_threshold`: (Optional) The number of consecutive successful or failed probes that allow or deny traffic to this endpoint. Possible values range from 1 to 100. The default value is 1.<br>  - `request_path`: (Optional) The URI used for requesting health status from the backend endpoint. Required if protocol is set to Http or Https. Otherwise, it is not allowed.<br>  - `interval_in_seconds`: (Optional) The interval, in seconds between probes to the backend endpoint for health status. The default value is 15, the minimum value is 5.<br>  - `number_of_probes_before_removal`: (Optional) The number of failed probe attempts after which the backend endpoint is removed from rotation. The default value is 2. NumberOfProbes multiplied by intervalInSeconds value must be greater or equal to 10.Endpoints are returned to rotation when at least one probe is successful.<pre>terraform<br>  # Each type of probe<br>  lb_probes = { <br>    probe1 = {<br>      name     = "probe_1"<br>      protocol = "Tcp"<br>      port     = 80<br>      interval_in_seconds = 5<br>    },<br>    probe2 = {<br>      name         = "probe_2"<br>      protocol     = "Http"<br>      port         = 80<br>      request_path = "/"<br>      interval_in_seconds = 5<br>    },<br>    probe3 = {<br>      name         = "probe_3"<br>      protocol     = "Https"<br>      port         = 443<br>      request_path = "/"<br>      interval_in_seconds = 5<br>    }<br>  }</pre> | <pre>map(object({<br>    name                            = optional(string)<br>    protocol                        = optional(string, "Tcp")<br>    port                            = optional(number, 80)<br>    interval_in_seconds             = optional(number, 15)<br>    probe_threshold                 = optional(number, 1)<br>    request_path                    = optional(string)<br>    number_of_probes_before_removal = optional(number, 2)<br>  }))</pre> | `{}` | no |
| <a name="input_lb_rules"></a> [lb\_rules](#input\_lb\_rules) | A list of objects that specifies the Load Balancer rules for the Load Balancer.<br>  Each object has 14 parameters:<br><br>  - `name`: (Optional) The name of the Load Balancer rule. Changing this forces a new resource to be created.<br>  - `frontend_ip_configuration_name`: (Optional) The name of the frontend IP configuration to which the rule is associated with<br>  - `protocol`: (Optional) The transport protocol for the external endpoint. Possible values are All, Tcp, or Udp.<br>  - `frontend_port`: (Optional) The port for the external endpoint. Port numbers for each Rule must be unique within the Load Balancer. Possible values range between 0 and 65534, inclusive.<br>  - `backend_port`: (Optional) The port used for internal connections on the endpoint. Possible values range between 0 and 65535, inclusive.<br>  - `backend_address_pool_resource_ids`: (Optional) A list of IDs that reference to a Backend Address Pool over which this Load Balancing Rule operates. Multiple backend pools only valid if Gateway SKU<br>  - `backend_address_pool_object_names`: (Optional) A list of names reference to a Backend Address Pool object over which this Load Balancing Rule operates. Multiple backend pools only valid if Gateway SKU<br>  - `probe_resource_id`: The ID of the probe used by this Load balancing rule.<br>  - `probe_object_name`: The name of the probe object used by this Load balancing rule.<br>  - `enable_floating_ip`: (Optional) A boolean parameter to determine if there are floating IPs enabled for this Load Balancer NAT rule. A "floating” IP is reassigned to a secondary server in case the primary server fails. Required to configure a SQL AlwaysOn Availability Group. Defaults to false.<br>  - `idle_timeout_in_minutes`: Specifies the idle timeout in minutes for TCP connections. Valid values are between 4 and 30 minutes. Defaults to 4 minutes.<br>  - `load_distribution`: Specifies the load balancing distribution type to be used by the Load Balancer. Possible values are: Default – The load balancer is configured to use a 5 tuple hash to map traffic to available servers. SourceIP – The load balancer is configured to use a 2 tuple hash to map traffic to available servers. SourceIPProtocol – The load balancer is configured to use a 3 tuple hash to map traffic to available servers. Also known as Session Persistence, where the options are called None, Client IP and Client IP and Protocol respectively.<br>  - `disable_outbound_snat`: A boolean to determine if snat is enabled for this Load Balancer rules. Defaults to false.<br>  - `enable_tcp_reset`: A boolean to determine if TCP Reset is enabled for this Load Balancer rule. Defaults to false.<pre>terraform<br>  lb_rules = {<br>    lb_rule_1 = {<br>      name                               = "myHTTPRule"<br>      frontend_ip_configuration_name     = "myFrontend"<br>      backend_address_pool_object_names = ["myBackendPool"]<br>      protocol = "Tcp" # default<br>      frontend_port = 80<br>      backend_port = 80<br>      probe_object_name                = "tcp1"<br>      idle_timeout_in_minutes = 15<br>      enable_tcp_reset = true<br>    }<br>  }</pre> | <pre>map(object({<br>    name                              = optional(string)<br>    frontend_ip_configuration_name    = optional(string)<br>    protocol                          = optional(string, "Tcp")<br>    frontend_port                     = optional(number, 3389)<br>    backend_port                      = optional(number, 3389)<br>    backend_address_pool_resource_ids = optional(list(string)) # multiple back end pools ONLY IF gateway sku load balancer<br>    backend_address_pool_object_names = optional(list(string)) # multiple back end pools ONLY IF gateway sku load balancer<br>    probe_resource_id                 = optional(string)<br>    probe_object_name                 = optional(string)<br>    enable_floating_ip                = optional(bool, false)<br>    idle_timeout_in_minutes           = optional(number, 4)<br>    load_distribution                 = optional(string, "Default")<br>    disable_outbound_snat             = optional(bool, false) # set `diasble_outbound_snat` to true when same frontend ip configuration is referenced by outbout rule and lb rule<br>    enable_tcp_reset                  = optional(bool, false)<br>  }))</pre> | `{}` | no |
| <a name="input_location"></a> [location](#input\_location) | The Azure region where the resources should be deployed.<br>  The full list of Azure regions can be found at: https://azure.microsoft.com/regions | `string` | n/a | yes |
| <a name="input_lock"></a> [lock](#input\_lock) | An object that sets a lock for the Load Balancer.<br><br>  - `name`: The name of the lock<br>  - `kind`: The type of lock to be created. Accepted values are `CanNotDelete` or `ReadOnly`. Defaults to None if kind is not set.<pre>terraform<br>  # Delete Lock for the Load Balancer<br>  lock = {<br>    name = "lock-{resourcename}"<br>    kind = "CanNotDelete"<br>  }</pre> | <pre>object({<br>    kind = string<br>    name = optional(string, null)<br>  })</pre> | `null` | no |
| <a name="input_name"></a> [name](#input\_name) | The name of the load balancer. | `string` | n/a | yes |
| <a name="input_public_ip_address_configuration"></a> [public\_ip\_address\_configuration](#input\_public\_ip\_address\_configuration) | An object variable that configures the settings that will be the same for all public IPs for this Load Balancer<br><br>  - `allocation_method`: (Optional) The allocation method for this IP address. Possible valuse are `Static` or `Dynamic`<br>  - `resource_group_name`: (Optional) Specifies the resource group to deploy all of the public IP addresses to be created<br>  - `ddos_protection_mode`: (Optional) The DDoS protection mode of the public IP. Possible values are `Disabled`, `Enabled`, and `VirtualNetworkInherited`. Defaults to `VirtualNetworkInherited`.<br>  - `ddos_protection_plan_resource_id`: (Optional) The ID of DDoS protection plan associated with the public IP<br>  - `domain_name_label`: (Optional) The label for the Domain Name. This will be used to make up the FQDN. If a domain name label is specified, an A DNS record is created for the public IP in the Microsoft Azure DNS system.<br>  - `idle_timeout_in_minutes`: (Optional) Specifies the timeout for the TCP idle connection. The value can be set between 4 and 30 minutes.<br>  - `ip_tags`: (Optional) A mapping of IP tags to assign to the public IP. Changing this forces a new resource to be created.<br>  - `ip_version`: (Optional) The version of IP to use for the Public IPs. Possible valuse are `IPv4` or `IPv6`. Changing this forces a new resource to be created.<br>  - `public_ip_prefix_resource_id`: (Optional) If specified then public IP address allocated will be provided from the public IP prefix resource. Changing this forces a new resource to be created.<br>  - `reverse_fqdn`: (Optional) A fully qualified domain name that resolves to this public IP address. If the reverseFqdn is specified, then a PTR DNS record is created pointing from the IP address in the in-addr.arpa domain to the reverse FQDN.<br>  - `sku`: (Optional) The SKU of the Public IP. Accepted values are `Basic` and `Standard`. Defaults to `Standard`. Changing this forces a new resource to be created.<br>  - `sku_tier`: (Optional) The SKU Tier that should be used for the Public IP. Possible values are `Regional` and `Global`. Defaults to `Regional`. Changing this forces a new resource to be created.<br>  - `tags`: (Optional) The collection of tags to be assigned to all every Public IP.<br><br>  Example Input:<pre>terraform<br>  # Standard Regional IPv4 Public IP address Configuration<br>  public_ip_address_configuration = {<br>    allocation_method = "Static"<br>    ddos_protection_mode = "VirtualNetworkInherited"<br>    idle_timeout_in_minutes = 30<br>    ip_version = "IPv4"<br>    sku_tier = "Regional"<br>  }</pre> | <pre>object({<br>    resource_group_name              = optional(string)<br>    allocation_method                = optional(string, "Static")<br>    ddos_protection_mode             = optional(string, "VirtualNetworkInherited")<br>    ddos_protection_plan_resource_id = optional(string)<br>    domain_name_label                = optional(string)<br>    idle_timeout_in_minutes          = optional(number, 4)<br>    ip_tags                          = optional(map(string))<br>    ip_version                       = optional(string, "IPv4")<br>    public_ip_prefix_resource_id     = optional(string)<br>    reverse_fqdn                     = optional(string)<br>    sku                              = optional(string, "Standard")<br>    sku_tier                         = optional(string, "Regional")<br>    tags                             = optional(map(any), {})<br>  })</pre> | `{}` | no |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | The name of the resource group where the load balancer will be deployed. | `string` | n/a | yes |
| <a name="input_role_assignments"></a> [role\_assignments](#input\_role\_assignments) | A map of objects that assigns a given principal (user or group) to a given role.<br><br>  - `role_definition_id_or_name`: The ID or name of the role definition to assign to the principal.<br>  - `principal_id`: The ID of the principal to assign the role to.<br>  - `description`: (Optional) A description of the role assignment.<br>  - `skip_service_principal_aad_check`: (Optional) If set to true, skips the Azure Active Directory check for the service principal in the tenant. This should only be set to true if using a service principal. Defaults to false.<br>  - `condition`: (Optional) A condition that will be used to scope the role assignment.<br>  - `condition_version`: (Optional) The version of the condition syntax. Valid values are '2.0'. Defaults to null.<br>  - `delegated_managed_identity_resource_id`: (Optional) The resource ID of the delegated managed identity.<pre>terraform<br>  role_assignments = {<br>    role_assignment_1 = {<br>      role_definition_id_or_name             = "Contributor"<br>      principal_id                           = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"<br>      skip_service_principal_aad_check       = true<br>    },<br>    role_assignment_2 = {<br>      role_definition_id_or_name             = "Storage Blob Data Reader"<br>      principal_id                           = "yyyyyyyy-yyyy-yyyy-yyyy-yyyyyyyyyyyy"<br>      description                            = "Example role assignment 2 of reader role"<br>      skip_service_principal_aad_check       = false<br>      condition                              = "@Resource[Microsoft.Storage/storageAccounts/blobServices/containers:ContainerName] StringEqualsIgnoreCase 'foo_storage_container'"<br>      condition_version                      = "2.0"<br>    }<br>  }</pre> | <pre>map(object({<br>    role_definition_id_or_name             = string<br>    principal_id                           = string<br>    description                            = optional(string, null)<br>    skip_service_principal_aad_check       = optional(bool, false) # only set to true IF using service principal<br>    condition                              = optional(string, null)<br>    condition_version                      = optional(string, null) # Valid values are 2.0<br>    delegated_managed_identity_resource_id = optional(string, null)<br>    principal_type                         = optional(string, null)<br>  }))</pre> | `{}` | no |
| <a name="input_sku"></a> [sku](#input\_sku) | The SKU of the Azure Load Balancer. <br>  Accepted values are `Basic`, `Standard`, and `Gateway`.<br>  Microsoft recommends `Standard` for production workloads. | `string` | `"Standard"` | no |
| <a name="input_sku_tier"></a> [sku\_tier](#input\_sku\_tier) | String parameter that specifies the SKU tier of this Load Balancer. <br>  Possible values are `Global` and `Regional`. <br>  Defaults to `Regional`. <br>  Changing this forces a new resource to be created. | `string` | `"Regional"` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | The tags to apply to the Load Balancer. | `map(string)` | `null` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_azurerm_lb"></a> [azurerm\_lb](#output\_azurerm\_lb) | Outputs the entire Azure Load Balancer resource |
| <a name="output_azurerm_lb_backend_address_pool"></a> [azurerm\_lb\_backend\_address\_pool](#output\_azurerm\_lb\_backend\_address\_pool) | Outputs each backend address pool in its entirety |
| <a name="output_azurerm_lb_nat_rule"></a> [azurerm\_lb\_nat\_rule](#output\_azurerm\_lb\_nat\_rule) | Outputs each NAT rule in its entirety |
| <a name="output_azurerm_public_ip"></a> [azurerm\_public\_ip](#output\_azurerm\_public\_ip) | Outputs each Public IP Address resource in its entirety |
| <a name="output_name"></a> [name](#output\_name) | Outputs the entire Azure Load Balancer resource |
| <a name="output_resource"></a> [resource](#output\_resource) | Outputs the entire Azure Load Balancer resource |
| <a name="output_resource_id"></a> [resource\_id](#output\_resource\_id) | Outputs the entire Azure Load Balancer resource |
<!-- END_TF_DOCS -->